<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="app.css">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Appointment Booking</title>
</head>
<body class="cal">
  <section class="con-cal">
    <div class="cal-det">
      <h1>Book an Appointment</h1>
      <form id="bookingForm">
        <div class="text-detail">
          <label class="text-decoration" for="date">Date:</label>
          <input  type="date" class="input-decoration" id="date" name="date" required>

          <label class="text-decoration" for="start">Start Time:</label>
          <input class="input-decoration" type="time" id="start"  name="start" required>

          <label class="text-decoration" for="summary">Name:</label>
          <input type="text" id="summary" name="summary" required>
          
          <label class="text-decoration" for="phone">Number:</label>
          <input class="phone-number" type="tel" id="phone" name="phone" required >
          
          <label class="endTime" for="end">End Time:</label>
          <input class="endTime" type="time" id="end" name="end" required readonly>
        </div>
        <button class="submit" type="submit">Book Appointment</button>
      </form>
    
      <script>
        document.getElementById('date').addEventListener('change', async (e) => {
      const date = e.target.value;
      const timeMin = `${date}T08:00:00Z`;
      const timeMax = `${date}T20:59:59Z`;

      const response = await fetch(`/available-slots?calendarId=your_calendar_id&timeMin=${timeMin}&timeMax=${timeMax}`);
      const slots = await response.json();

      const timeSelect = document.getElementById('time');
      timeSelect.innerHTML = '';
      slots.forEach(slot => {
        const option = document.createElement('option');
        const start = new Date(slot.start);
        option.value = slot.start;
        option.textContent = start.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        timeSelect.appendChild(option);
      });
    });
    document.getElementById('phone').addEventListener('input', function (e) {
          // Ensure only numbers and max length of 8
          let value = e.target.value.replace(/\D/g, '').substring(0, 8);
          e.target.value = value;
        });

    document.getElementById('bookingForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const form = e.target;
      const date = form.date.value;
      const start = form.time.value;
      const end = new Date(new Date(start).getTime() + 10 * 60000).toISOString();
      const summary = form.summary.value;

      const response = await fetch('/book-appointment', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ calendarId: 'your_calendar_id', start, end, summary })
      });

      if (response.ok) {
        alert('Appointment booked successfully!');
      } else {
        alert('Failed to book appointment.');
      }
    });to
      </script>
      <script src="kourio.js" ></script>
      <script src="kourio.bash" ></script>
      <iframe src="https://calendar.google.com/calendar/embed?height=600&wkst=1&ctz=UTC&bgcolor=%23ffffff&src=Y29uc3QwOWtrQGdtYWlsLmNvbQ&src=MzkwZDU3MDQzNDVjYzM0MzVhNzAyMjNkOGZiNDBkZjNmNjA4NWNhYjAxMjczNzRmMzFkMDY5M2M2ZmYyNzQxYkBncm91cC5jYWxlbmRhci5nb29nbGUuY29t&src=YWRkcmVzc2Jvb2sjY29udGFjdHNAZ3JvdXAudi5jYWxlbmRhci5nb29nbGUuY29t&src=ZmFtaWx5MTExMTQwNjg3MDE1MzQ0OTY4OTVAZ3JvdXAuY2FsZW5kYXIuZ29vZ2xlLmNvbQ&src=ZW4uY3kjaG9saWRheUBncm91cC52LmNhbGVuZGFyLmdvb2dsZS5jb20&color=%23039BE5&color=%239E69AF&color=%2333B679&color=%23EF6C00&color=%230B8043" class="gcal"></iframe>
    </div>
  </section>
</body>
</html>




